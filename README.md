# Project Overview
This project is based on Grant Collins's ["Malware Analysis Project"](https://www.youtube.com/playlist?list=PLLDjng0_4bmMvtDw94WcyzpegCOMCs3MP). The goal of this project is to statically and dynamically analyze various malwares via virtual machines. The target system will be a virtual machine running the Windows 10 Enterprise operating sytsem with the FLARE-VM software suite installed to provide malware analysis capabilities. We will also be using REMnux in a virtual machine as a C2 server. Below will be documentation regarding the setup for this lab.

# Network Setup

To ensure that relevant systems can only communicate with each other and not the internet, a new network adapter is created in Virtualbox. The adapter is set to the home IP address, 10.0.0.1, as seen below.
![configuredadapter](https://github.com/mkathia/malware-analysis/assets/113075504/737a1a4f-4de0-410a-8610-cc62b3ef9287)

The server is then configured to be set to 10.0.0.2, with the range of addresses set between 10.0.0.3 and 10.0.0.254, as seen below.
![configserver](https://github.com/mkathia/malware-analysis/assets/113075504/4e69f45e-3cf9-4076-b7ab-2350f67c4c4d)

# Target System Setup

As previously mentioned, our target system will be running the Windows 10 Enterprise operating system. Thus, our first step was obtaining the ISO. To do this, we go on Microsoft's website and download the 64-bit Enterprise ISO.
![win10ISO](https://github.com/mkathia/malware-analysis/assets/113075504/27755319-71da-48d1-ad18-027e8360d9d2)

We then give Virtualbox the ISO, and go through all the standard configuration steps. This includes allocating space (in my case, 75 gigabytes), memory (8 gigabytes), and processors (6 cores).

![win10memory](https://github.com/mkathia/malware-analysis/assets/113075504/3f6a8252-2fec-46c0-bfa9-695aae17b4ce)
![win10storage](https://github.com/mkathia/malware-analysis/assets/113075504/1d2a124c-8c74-4a49-a6d5-c58dea1fd2f3)
![win10processors](https://github.com/mkathia/malware-analysis/assets/113075504/4fb8f41d-7e3d-477b-81e1-e15a231c978c)

After this setup, we go through Windows' setup steps. Then, we have our functional virtual machine.
![Screenshot 2024-06-01 191610](https://github.com/mkathia/malware-analysis/assets/113075504/8cc537e1-ea9a-4fd4-a18e-ef298838a13b)

Now, our first steps are ensuring this system is vulnerable by disabling Windows Defender and Firewall. We go into Windows' settings and disable relevant protections, as seen below.
![disabledefender](https://github.com/mkathia/malware-analysis/assets/113075504/ac9df0b1-336a-4337-856c-e816162ce544)

Then, we go into the group policy settings. We proceed to access "Administrative Templates"/"Windows Components"/"Microsoft Defender Antivirus", and then enable the "Turn off Microsoft Defender Antivirus" policy.
![defendergrouppolicy](https://github.com/mkathia/malware-analysis/assets/113075504/6c3217c9-f9ac-424a-93a7-89d018023363)

Following this, we access "Administrative Templates"/"Network"/"Network Connections"/"Windows Defender Firewall", and then disable the "Protect all network connections" policy within both Domain Profile and Standard Profile.
![disablefirewallpolicydomain](https://github.com/mkathia/malware-analysis/assets/113075504/fcdb64da-ac3a-4ac0-befb-a378c75e98ad)
![disablefirewallpolicy](https://github.com/mkathia/malware-analysis/assets/113075504/a6e1d575-fcc6-4b6e-a5ac-2088bcb1cb98)

Now that our machine is vulnerable, we set up a snapshot incase our next steps fail. This functions as a backup for us.
![snapshot](https://github.com/mkathia/malware-analysis/assets/113075504/e1b06ef0-9abd-4de8-9e2c-7a9e4c411dec)

Now, we install FlareVM, which contains all the tools that we need to properly analyze malware. We grab the script from Github, unblock the file, and then run it.
![flareinstallscript](https://github.com/mkathia/malware-analysis/assets/113075504/71ea7239-48d4-4e9f-8e56-04174ce21a3b)

We then install all the tools that we want:
![flareinstalltools](https://github.com/mkathia/malware-analysis/assets/113075504/a0051843-806b-4767-81c4-5a258e2ea5ee)

And then wait for it to run before getting our completed target system, as seen below.
![completedflare](https://github.com/mkathia/malware-analysis/assets/113075504/67f1a4b8-f6bd-4706-83ef-5856a33beb0b)

This concludes the setup for our target system. We take a snapshot here to have a fall-back once our malware detonates.



